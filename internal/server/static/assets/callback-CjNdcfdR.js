import{f,h as g,r as i,s as l,j as s,i as h}from"./index-CzvqyFm1.js";import{l as m}from"./request-CxY7LzDL.js";const j=()=>{const a=f(),e=g(),o=i.useRef(!1);return i.useEffect(()=>{if(o.current)return;o.current=!0;const r=new URLSearchParams(a.search),c=r.get("code"),u=r.get("state"),n=r.get("oauth");if(!c||!n){l.error("缺少必要登录参数"),e("/login");return}m.callback(n,c,u||"").then(t=>{localStorage.setItem("token",t.token),e(t.redirect)}).catch(t=>{console.error("登录回调失败:",t),l.error("登录失败，请重试"),e("/login")})},[a.search,e]),s.jsxs("div",{className:"relative h-screen w-screen flex flex-col text-gray-100 items-center justify-center bg-slate-800",children:[s.jsx(h,{}),s.jsx("div",{className:"absolute left-0 right-0 bottom-20 m-auto text-center",children:"正在登录中..."})]})};export{j as LoginCallback};
