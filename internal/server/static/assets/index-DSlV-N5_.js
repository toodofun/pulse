import{r as n,I as p,h as b,aE as S,e as w,j as s,B as m}from"./index-CzvqyFm1.js";import{G as y,f as N}from"./time-BWNBWjg_.js";import{m as O}from"./request-CCVLAILL.js";import{A as P,m as h}from"./index-Y_dV1kkX.js";import{P as C}from"./index-CiucK-wx.js";import{d as x,S as M,a as z}from"./common-5krkRBGx.js";var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},f.apply(this,arguments)}const R=(e,t)=>n.createElement(p,f({},e,{ref:t,icon:Y})),I=n.forwardRef(R);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},u.apply(this,arguments)}const H=(e,t)=>n.createElement(p,u({},e,{ref:t,icon:A})),$=n.forwardRef(H);function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},g.apply(this,arguments)}const B=(e,t)=>n.createElement(p,g({},e,{ref:t,icon:D})),j=n.forwardRef(B),J=()=>{const[e,t]=n.useState(),[a,l]=n.useState([]),i=b(),{id:o}=S();return w(async()=>{if(!o)return;const c=await O.detail(o);t(c);const d=c.records.slice(-25).map(r=>({label:x(r.monitorAt).format("YYYY-MM-DD HH:mm:ss"),color:r.isSuccess?"var(--color-green-400)":"var(--color-red-400)",note:r.message}));d.reverse();const v=25-d.length;if(v>0){const r=Array.from({length:v},()=>({label:"",color:"var(--color-gray-400)",note:"no value"}));d.unshift(...r)}l(d)},{ready:!!o,refreshDeps:[o],pollingInterval:5e3}),s.jsxs("div",{className:"flex flex-col gap-6 h-full overflow-y-auto",children:[s.jsx(y,{title:"Monitoring"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[s.jsx(P,{animation:e?.enabled,size:22,type:e?.enabled?e?.isSuccess?"succeeded":"failed":"unknown"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx(C,{title:e?.title||""}),s.jsx("div",{className:"text-slate-400",children:e?.type==="http"&&s.jsxs("div",{children:["HTTP/S monitor for"," ",s.jsx("a",{href:JSON.parse(e?.fields)?.url,target:"_blank",children:s.jsx("span",{className:"text-green-400 underline",children:JSON.parse(e?.fields)?.url})})]})})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[e?.enabled?s.jsx(m,{icon:s.jsx(I,{}),onClick:async()=>{await h.disable(e?.id).then(()=>{i(0)})},children:"Pause"}):s.jsx(m,{icon:s.jsx($,{}),onClick:async()=>{await h.enable(e?.id).then(()=>{i(0)})},children:"Resume"}),e?.private?s.jsx(m,{icon:s.jsx(j,{}),onClick:async()=>{await h.public(e?.id).then(()=>{i(0)})},children:"Set Public"}):s.jsx(m,{icon:s.jsx(j,{}),onClick:async()=>{await h.private(e?.id).then(()=>{i(0)})},children:"Set Private"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-slate-800 rounded-lg",children:[s.jsx("div",{children:"Current status"}),s.jsx("div",{className:"font-bold text-xl",children:e?.enabled?s.jsx("span",{className:"text-green-400/80",children:"Active"}):s.jsx("span",{className:"text-gray-400/80",children:"Inactive"})}),s.jsx("div",{children:e?.enabled?s.jsxs("div",{children:["Checked every ",N(e?.interval||0)]}):s.jsxs("div",{children:["Stopped on ",x(e?.updatedAt).format("YYYY-MM-DD HH:mm:ss")]})})]}),s.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-slate-800 rounded-lg",children:[s.jsx("div",{children:"Last check"}),s.jsx("div",{className:"font-bold text-xl",children:e?.isSuccess?s.jsx("span",{className:"text-green-400/80",children:"Up"}):s.jsx("span",{className:"text-red-400/80",children:"Down"})}),s.jsx("div",{children:e?.records&&e?.records.length>0?x(e?.records[0]?.monitorAt).format("YYYY-MM-DD HH:mm:ss"):"Coming soon"})]}),s.jsx("div",{className:"col-span-1 flex flex-col gap-4 p-4 bg-slate-800 rounded-lg",children:s.jsx(M,{items:a,header:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:"Last 25 times"}),s.jsxs("div",{children:[e?.records&&e.records.length>0?e.records.filter(c=>c.isSuccess).length/e.records.length*100:0,"%"]})]}),footer:s.jsxs("div",{children:[e?.records&&e.records.filter(c=>c.isSuccess).length," success"]})})}),s.jsx("div",{className:"col-span-3 bg-slate-800 rounded-lg",children:s.jsx(z,{id:e?.id,title:e?.title,fromPublic:!e?.private,isPrivate:e?.private})})]})]})};export{J as default};
