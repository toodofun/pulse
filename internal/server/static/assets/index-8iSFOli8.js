/**
 * Copyright 2025 The Toodofun Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http:www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{r as l,I as p,h as v,aE as j,e as b,j as e,B as u}from"./index-BpEXRqn4.js";import{G as N,f as S}from"./time-C5Mm2XwQ.js";import{m as y}from"./request-cJiTAwVy.js";import{A as w,m as g}from"./index-DpTnT3_U.js";import{P as O}from"./index-CM7Rwzna.js";import{d,S as P,a as Y}from"./common-DQA65V_C.js";var C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"};function m(){return m=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},m.apply(this,arguments)}const D=(s,t)=>l.createElement(p,m({},s,{ref:t,icon:C})),z=l.forwardRef(D);function x(){return x=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},x.apply(this,arguments)}const A=(s,t)=>l.createElement(p,x({},s,{ref:t,icon:M})),H=l.forwardRef(A),L=()=>{const[s,t]=l.useState(),[a,r]=l.useState([]),h=v(),{id:c}=j();return b(async()=>{if(!c)return;const n=await y.detail(c);t(n);const o=n.records.slice(-25).map(i=>({label:d(i.monitorAt).format("YYYY-MM-DD HH:mm:ss"),color:i.isSuccess?"var(--color-green-400)":"var(--color-red-400)",note:i.message}));o.reverse();const f=25-o.length;if(f>0){const i=Array.from({length:f},()=>({label:"",color:"var(--color-gray-400)",note:"no value"}));o.unshift(...i)}r(o)},{ready:!!c,refreshDeps:[c],pollingInterval:5e3}),e.jsxs("div",{className:"flex flex-col gap-6 h-full overflow-y-auto",children:[e.jsx(N,{title:"Monitoring"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[e.jsx(w,{animation:s?.enabled,size:22,type:s?.enabled?s?.isSuccess?"succeeded":"failed":"unknown"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(O,{title:s?.title||""}),e.jsx("div",{className:"text-slate-400",children:s?.type==="http"&&e.jsxs("div",{children:["HTTP/S monitor for"," ",e.jsx("a",{href:JSON.parse(s?.fields)?.url,target:"_blank",children:e.jsx("span",{className:"text-green-400 underline",children:JSON.parse(s?.fields)?.url})})]})})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:s?.enabled?e.jsx(u,{icon:e.jsx(z,{}),onClick:async()=>{await g.disable(s?.id).then(()=>{h(0)})},children:"Pause"}):e.jsx(u,{icon:e.jsx(H,{}),onClick:async()=>{await g.enable(s?.id).then(()=>{h(0)})},children:"Resume"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-slate-800 rounded-lg",children:[e.jsx("div",{children:"Current status"}),e.jsx("div",{className:"font-bold text-xl",children:s?.enabled?e.jsx("span",{className:"text-green-400/80",children:"Active"}):e.jsx("span",{className:"text-gray-400/80",children:"Inactive"})}),e.jsx("div",{children:s?.enabled?e.jsxs("div",{children:["Checked every ",S(s?.interval||0)]}):e.jsxs("div",{children:["Stopped on ",d(s?.updatedAt).format("YYYY-MM-DD HH:mm:ss")]})})]}),e.jsxs("div",{className:"flex flex-col gap-4 p-4 bg-slate-800 rounded-lg",children:[e.jsx("div",{children:"Last check"}),e.jsx("div",{className:"font-bold text-xl",children:s?.isSuccess?e.jsx("span",{className:"text-green-400/80",children:"Up"}):e.jsx("span",{className:"text-red-400/80",children:"Down"})}),e.jsx("div",{children:s?.records&&s?.records.length>0?d(s?.records[0]?.monitorAt).format("YYYY-MM-DD HH:mm:ss"):"Coming soon"})]}),e.jsx("div",{className:"col-span-1 flex flex-col gap-4 p-4 bg-slate-800 rounded-lg",children:e.jsx(P,{items:a,header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:"Last 25 times"}),e.jsxs("div",{children:[s?.records&&s.records.length>0?s.records.filter(n=>n.isSuccess).length/s.records.length*100:0,"%"]})]}),footer:e.jsxs("div",{children:[s?.records&&s.records.filter(n=>n.isSuccess).length," success"]})})}),e.jsx("div",{className:"col-span-3 bg-slate-800 rounded-lg",children:e.jsx(Y,{id:s?.id,title:s?.title,fromPublic:!s?.private})})]})]})};export{L as default};
